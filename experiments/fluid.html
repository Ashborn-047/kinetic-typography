<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLUID - Typography Experiment</title>

    <!-- Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;1,400&family=Space+Grotesk:wght@300;400;500;600&family=Syne:wght@400;700;800&family=VT323&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>

<body class="bg-[#050505] min-h-screen flex flex-col">
    <!-- SVG Filter -->
    <svg width="0" height="0" style="position: absolute;">
        <defs>
            <filter id="ink-distortion">
                <feTurbulence type="fractalNoise" baseFrequency="0" numOctaves="2" result="warp"></feTurbulence>
                <feDisplacementMap xChannelSelector="R" yChannelSelector="G" scale="20" in="SourceGraphic" in2="warp">
                </feDisplacementMap>
            </filter>
        </defs>
    </svg>

    <!-- Back Link -->
    <nav class="p-6">
        <a href="../index.html"
            class="text-gray-400 hover:text-white transition-colors font-body text-sm uppercase tracking-widest">‚Üê Back
            to Archive</a>
    </nav>

    <!-- Experiment Container -->
    <main class="flex-1 flex flex-col items-center justify-center px-4">
        <span class="font-body text-xs text-gray-500 mb-8">EXP_09</span>

        <div class="text-center cursor-pointer" id="fluid-text">
            <h1 class="font-display text-[15vw] font-bold uppercase tracking-tighter text-white transition-all">FLUID
            </h1>
        </div>

        <p class="font-body text-lg text-gray-400 mt-8 max-w-md text-center">Turbulent wave distortion like liquid ink.
        </p>
    </main>

    <script>
        const fluidText = document.querySelector('#fluid-text h1');
        const fluidContainer = document.querySelector('#fluid-text');
        const fluidTurbulence = document.querySelector('#ink-distortion feTurbulence');
        const fluidDisplacement = document.querySelector('#ink-distortion feDisplacementMap');

        let fluidState = { freq: 0, scale: 0 };
        let fluidTween = null;

        function updateFluidFilter() {
            if (fluidTurbulence) fluidTurbulence.setAttribute('baseFrequency', fluidState.freq);
            if (fluidDisplacement) fluidDisplacement.setAttribute('scale', fluidState.scale);
        }

        fluidContainer.addEventListener('mouseenter', () => {
            fluidText.style.filter = 'url(#ink-distortion)';

            gsap.to(fluidState, {
                scale: 25,
                duration: 0.5,
                ease: "power2.out",
                onUpdate: updateFluidFilter
            });

            if (fluidTween) fluidTween.kill();
            fluidTween = gsap.fromTo(fluidState,
                { freq: 0.015 },
                {
                    freq: 0.04,
                    duration: 1.5,
                    yoyo: true,
                    repeat: -1,
                    ease: "sine.inOut",
                    onUpdate: updateFluidFilter
                }
            );
        });

        fluidContainer.addEventListener('mouseleave', () => {
            if (fluidTween) fluidTween.kill();

            gsap.to(fluidState, {
                freq: 0,
                scale: 0,
                duration: 0.5,
                ease: "power2.inOut",
                onUpdate: updateFluidFilter,
                onComplete: () => {
                    fluidText.style.filter = 'none';
                }
            });
        });
    </script>
</body>

</html>